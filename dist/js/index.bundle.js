(()=>{"use strict";const e={inputFieldStart:document.querySelector(".input__field-start"),inputFieldEnd:document.querySelector(".input__field-end"),showAsteroidBtn:document.querySelector(".input__btn"),tableBody:document.querySelector("#tableBody"),asteroidInput:document.querySelector("#asteroids")};document.querySelector(".input__btn").addEventListener("click",(function(){let a=e.inputFieldStart.value,n=e.inputFieldEnd.value;parseInt(n.replace(/-/g,""),10)-parseInt(a.replace(/-/g,""),10)<=7?async function(e,t){const a=`https://api.nasa.gov/neo/rest/v1/feed?start_date=${e}&end_date=${t}&api_key=x0HeIJzRCLm3lj0zrfXt2LltusKVCO7aoHmRkVq2`;try{const e=await fetch(a),t=await e.json();return await t.near_earth_objects}catch(e){alert("Error!")}}(a,n).then((a=>{const n=[];for(const e in a)for(let t=0;t<a[e].length;t++){let r=a[e][t];!0===r.is_potentially_hazardous_asteroid&&n.push(r)}for(const e in n){let a,r,o,i,s,d;a=n[e].close_approach_data[0].close_approach_date,r=n[e].name,o=n[e].close_approach_data[0].relative_velocity.kilometers_per_hour,i=n[e].estimated_diameter.meters.estimated_diameter_max,s=n[e].estimated_diameter.meters.estimated_diameter_min,d=n[e].id,t.dateOfApproach.push(a),t.name.push(r),t.speed.push(o),t.maxDiameter.push(i),t.minDiameter.push(s),t.id.push(d)}var r,o;!function(t){const a=e.tableBody;for(let e=0;e<t.name.length;e++){let n=`<tr>\n                        <td>${t.dateOfApproach[e]}</td>\n                        <td>${t.name[e]}</td>\n                        <td>${t.speed[e]}</td>\n                        <td>${t.minDiameter[e]}</td>\n                        <td>${t.maxDiameter[e]}</td>\n                   </tr>`;a.innerHTML+=n}}(t),r=t.name,o=t.id,r.forEach(((e,t)=>{const a=document.createElement("option");a.setAttribute("value",e),a.setAttribute("data-id",o[t]),document.getElementById("asteroid-list").appendChild(a)}))})):alert("Maximum range between start and end date is 7 days!")}));const t={dateOfApproach:[],name:[],speed:[],minDiameter:[],maxDiameter:[],id:[]};document.querySelector(".testBtn").addEventListener("click",(function(){const t=document.querySelector(".selected-asteroids"),a=e.asteroidInput.value,n=document.querySelectorAll("option");let r=e.asteroidInput;a&&n.forEach((e=>{if(e.value===a){let n=document.createElement("li");n.setAttribute("data-id",e.getAttribute("data-id")),n.innerHTML=a,t.appendChild(n),n.classList.add("chosen-asteroid"),console.log(n,t),r.value="",function(){const e=document.querySelector(".chartPageBtn"),t=document.querySelectorAll(".chosen-asteroid");console.log(t.length),e.addEventListener("click",(function(){if(t.length>0)return function(e){const t=[],a=document.createElement("div");e.forEach((e=>{(async function(e){const t=`https://api.nasa.gov/neo/rest/v1/neo/${e}?api_key=x0HeIJzRCLm3lj0zrfXt2LltusKVCO7aoHmRkVq2`,a=await fetch(t);return await a.json()})(e.getAttribute("data-id")).then((e=>{const n=e.close_approach_data.filter((e=>parseInt(e.close_approach_date.substring(0,4),10)>1900&&parseInt(e.close_approach_date.substring(0,4),10)<1999)).length;t.push(n),a.innerHTML+=`<span class="chart-item">${e.name}</span><div class="chart"></div>`,localStorage.setItem("numOfApproach",JSON.stringify(t)),localStorage.setItem("item",JSON.stringify(a.innerHTML))}))}))}(t),void setTimeout((()=>{window.location="chart.html"}),1500);alert("Please select asteroids from table!")}))}()}}))}))})();